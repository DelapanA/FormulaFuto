<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>F1 2025 - Tracker Verstappen</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Roboto&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-image: url('https://images.unsplash.com/photo-1571607388067-22da62f69f03?auto=format&fit=crop&w=1950&q=80');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      backdrop-filter: blur(6px);
      transition: background-color 0.3s, color 0.3s;
    }
    h1, h2 {
      font-family: 'Orbitron', sans-serif;
    }
    .overlay {
      background-color: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
    }
  </style>
</head>
<body class="text-white">
<div class="overlay min-h-screen">
  <header class="flex items-center justify-between p-4 shadow-md">
    <h1 class="text-2xl">F1 2025: Tracker Verstappen</h1>
    <button onclick="toggleTheme()" class="px-4 py-2 bg-gray-200 text-black dark:bg-gray-800 dark:text-white rounded-xl">Toggle Mode</button>
  </header>

  <main class="p-4 space-y-10">
    <!-- Countdown -->
    <section class="text-center">
      <h2 class="text-xl font-semibold mb-2">Countdown Sesi Aktif</h2>
      <p id="singleCountdown" class="text-2xl font-mono text-yellow-300 animate-pulse">Memuat...</p>
    </section>

    <!-- Rumor Red Bull -->
    <section>
      <h2 class="text-xl font-semibold mb-2">Update & Rumor Upgrade Red Bull</h2>
      <ul class="list-disc ml-6 space-y-1">
        <li>Upgrade floor dan sidepod final akan diuji di Silverstone</li>
        <li>Suspensi depan diubah untuk stabilitas masuk tikungan</li>
        <li>Target utama: tingkatkan grip belakang dan kurangi degradasi ban</li>
        <li>Jika gagal, Red Bull kemungkinan hentikan pengembangan 2025</li>
      </ul>
    </section>

    <section id="news-section">
        <h2 class="text-xl font-semibold mb-4">Berita Terbaru Red Bull</h2>
        <ul id="news-list" class="list-disc ml-6 space-y-2 text-sm text-white"></ul>
    </section>


    <!-- Slider Jadwal Balapan -->
    <section class="mt-10">
      <h2 class="text-xl font-semibold mb-4">Jadwal Balapan F1 2025</h2>
      <div class="flex items-center space-x-2">
        <button onclick="scrollLeft()" class="text-2xl px-3 bg-gray-700 rounded">&lt;</button>
        <div id="jadwal" class="overflow-x-auto whitespace-nowrap scroll-smooth flex space-x-4 border p-2 w-full max-w-full">
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Australia<br /><span class="text-sm">16 Maret</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Arab Saudi<br /><span class="text-sm">23 Maret</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Bahrain<br /><span class="text-sm">30 Maret</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Jepang<br /><span class="text-sm">6 April</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Cina<br /><span class="text-sm">20 April</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Miami<br /><span class="text-sm">4 Mei</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Imola<br /><span class="text-sm">18 Mei</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Monako<br /><span class="text-sm">25 Mei</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Kanada<br /><span class="text-sm">8 Juni</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Spanyol<br /><span class="text-sm">22 Juni</span></div>
          <div class="min-w-max bg-green-700 px-4 py-2 rounded">Austria<br /><span class="text-sm">29 Juni</span></div>
          <div class="min-w-max bg-yellow-600 font-bold px-4 py-2 rounded">Inggris<br /><span class="text-sm">7 Juli</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Hungaria<br /><span class="text-sm">21 Juli</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Belgia<br /><span class="text-sm">3 Agustus</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Belanda<br /><span class="text-sm">24 Agustus</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Italia<br /><span class="text-sm">7 September</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Singapura<br /><span class="text-sm">21 September</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Jepang 2<br /><span class="text-sm">5 Oktober</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">AS<br /><span class="text-sm">19 Oktober</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Meksiko<br /><span class="text-sm">26 Oktober</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Brasil<br /><span class="text-sm">9 November</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Las Vegas<br /><span class="text-sm">22 November</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Qatar<br /><span class="text-sm">30 November</span></div>
          <div class="min-w-max bg-yellow-600 px-4 py-2 rounded">Abu Dhabi<br /><span class="text-sm">7 Desember</span></div>
        </div>
        <button onclick="scrollRight()" class="text-2xl px-3 bg-gray-700 rounded">&gt;</button>
      </div>
    </section>

    <!-- Klasemen -->
    <section>
      <h2 class="text-xl font-semibold mt-8 mb-2">Klasemen Lengkap F1 2025</h2>
      <div class="overflow-x-auto">
        <table class="w-full table-auto border-collapse border border-white text-sm">
          <thead class="bg-gray-800">
            <tr>
              <th class="border px-2 py-1">Pos</th>
              <th class="border px-2 py-1">Pembalap</th>
              <th class="border px-2 py-1">Tim</th>
              <th class="border px-2 py-1">Poin</th>
            </tr>
          </thead>
          <tbody id="klasemen-body">
            <!-- Data akan dimuat otomatis dari standings.json -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Statistik Grafik -->
    <section>
      <h2 class="text-xl font-semibold mb-2">Statistik Verstappen vs Piastri</h2>
      <canvas id="chartPoin" height="200"></canvas>
    </section>
  </main>

  <footer class="p-4 text-center text-sm text-gray-300">
    - Verstappen Tracker â€“
  </footer>
</div>

<!-- SCRIPT -->
<script>
  function toggleTheme() {
    document.documentElement.classList.toggle('dark');
  }

  function scrollLeft() {
    const el = document.getElementById('jadwal');
    if (el) el.scrollBy({ left: -200, behavior: 'smooth' });
  }

  function scrollRight() {
    const el = document.getElementById('jadwal');
    if (el) el.scrollBy({ left: 200, behavior: 'smooth' });
  }

  const sessions = [
    { label: 'FP1', start: 'July 5, 2025 18:00:00 GMT+0700', end: 'July 5, 2025 19:00:00 GMT+0700' },
    { label: 'FP2', start: 'July 5, 2025 21:00:00 GMT+0700', end: 'July 5, 2025 22:00:00 GMT+0700' },
    { label: 'FP3', start: 'July 6, 2025 17:00:00 GMT+0700', end: 'July 6, 2025 18:00:00 GMT+0700' },
    { label: 'Kualifikasi', start: 'July 6, 2025 20:00:00 GMT+0700', end: 'July 6, 2025 21:00:00 GMT+0700' },
    { label: 'Balapan', start: 'July 7, 2025 20:00:00 GMT+0700', end: 'July 7, 2025 22:00:00 GMT+0700' }
  ];

  let currentSessionIndex = 0;
  function updateSingleCountdown() {
    const now = new Date();
    if (currentSessionIndex >= sessions.length) return;
    const session = sessions[currentSessionIndex];
    const start = new Date(session.start);
    const end = new Date(session.end);
    const display = document.getElementById("singleCountdown");
    if (!display || !session) return;

    if (now < start) {
      const diff = start - now;
      const d = Math.floor(diff / (1000 * 60 * 60 * 24));
      const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const s = Math.floor((diff % (1000 * 60)) / 1000);
      display.innerText = `${session.label} dimulai dalam: ${d}d ${h}h ${m}m ${s}s`;
    } else if (now >= start && now < end) {
      display.innerText = `${session.label} sedang berlangsung!`;
    } else {
      currentSessionIndex++;
      updateSingleCountdown();
    }
  }

  window.addEventListener("DOMContentLoaded", () => {
    updateSingleCountdown();
    setInterval(updateSingleCountdown, 1000);

    // CHART
    const ctx = document.getElementById('chartPoin').getContext('2d');
    new Chart(ctx, {
      type: 'line',
      data: {
        labels: ["Australia", "Arab Saudi", "Bahrain", "Jepang", "Cina", "Miami", "Imola", "Monako", "Kanada", "Spanyol", "Austria"],
        datasets: [
          {
            label: 'Verstappen',
            data: [18, 33, 45, 61, 75, 91, 108, 125, 139, 146, 155],
            borderColor: 'yellow',
            borderWidth: 2,
            tension: 0.3
          },
          {
            label: 'Piastri',
            data: [25, 43, 61, 78, 95, 115, 135, 152, 173, 196, 216],
            borderColor: 'orange',
            borderWidth: 2,
            tension: 0.3
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { labels: { color: 'white' } }
        },
        scales: {
          x: { ticks: { color: 'white' } },
          y: { ticks: { color: 'white' } }
        }
      }
    });
  });
  
  fetch('redbull-news.json')
  .then(res => res.json())
  .then(data => {
    const list = document.getElementById('news-list');
    if (!list) return;
    data.forEach(item => {
      const li = document.createElement('li');
      li.innerHTML = `<a href="${item.url}" target="_blank" class="text-yellow-300 underline">${item.title}</a>
        <span class="text-gray-400">(${item.source})</span>`;
      list.appendChild(li);
    });
  })
  .catch(err => console.error("Gagal memuat berita:", err));

  fetch('standings.json')
  .then(res => res.json())
  .then(data => {
    const tbody = document.getElementById('klasemen-body');
    tbody.innerHTML = ''; // kosongkan isi lama

    data.forEach(row => {
      const tr = document.createElement('tr');
      if (row.driver.includes("Verstappen")) {
        tr.classList.add('bg-yellow-600', 'font-semibold');
      }
      tr.innerHTML = `
        <td class="border px-2 py-1">${row.pos}</td>
        <td class="border px-2 py-1">${row.driver}</td>
        <td class="border px-2 py-1">${row.team}</td>
        <td class="border px-2 py-1">${row.points}</td>
      `;
      tbody.appendChild(tr);
    });
  })
  .catch(err => {
    console.error('Gagal memuat klasemen:', err);
  });
</script>
</body>
</html>